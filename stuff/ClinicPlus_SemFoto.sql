-- MySQL Script generated by MySQL Workbench
-- Tue Mar 21 20:49:29 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema ClinicPlus
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `ClinicPlus` ;

-- -----------------------------------------------------
-- Schema ClinicPlus
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ClinicPlus` DEFAULT CHARACTER SET utf8 ;
USE `ClinicPlus` ;

-- -----------------------------------------------------
-- Table `cliente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `cliente` ;

CREATE TABLE IF NOT EXISTS `cliente` (
  `idcliente` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(100) NOT NULL,
  `cpf` VARCHAR(14) NOT NULL,
  `nascimento` DATETIME NULL,
  `foto` MEDIUMBLOB NULL,
  PRIMARY KEY (`idcliente`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `funcionario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `funcionario` ;

CREATE TABLE IF NOT EXISTS `funcionario` (
  `idfuncionario` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(100) NOT NULL,
  `cpf` VARCHAR(14) NOT NULL,
  `nascimento` DATETIME NULL,
  PRIMARY KEY (`idfuncionario`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `local`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `local` ;

CREATE TABLE IF NOT EXISTS `local` (
  `idlocal` INT NOT NULL AUTO_INCREMENT,
  `descricao` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`idlocal`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `admin`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `admin` ;

CREATE TABLE IF NOT EXISTS `admin` (
  `idadmin` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(100) NOT NULL,
  `usuario` VARCHAR(100) NOT NULL,
  `senha` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`idadmin`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `agendamento`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `agendamento` ;

CREATE TABLE IF NOT EXISTS `agendamento` (
  `idagendamento` INT NOT NULL AUTO_INCREMENT,
  `idfuncionario` INT NOT NULL,
  `idcliente` INT NOT NULL,
  `idlocal` INT NOT NULL,
  `idadmin` INT NOT NULL,
  `data_agendamento` DATE NOT NULL,
  `hora_agendamento` TIME NOT NULL,
  `data_atendimento` DATE NULL,
  `hora_atendimento` TIME NULL,
  `data_confirmacao` DATETIME NULL,
  `data_cadastro` DATETIME NULL,
  `fg_status` ENUM('A', 'I', 'C', 'F') NOT NULL DEFAULT 'A' COMMENT 'A - Ativo (recem cadastrado)\nI - Inativo (cancelado)\nC - Confirmado\nF - Finalizado\n',
  PRIMARY KEY (`idagendamento`),
  CONSTRAINT `fk_agendamento_funcionario`
    FOREIGN KEY (`idfuncionario`)
    REFERENCES `funcionario` (`idfuncionario`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_agendamento_cliente1`
    FOREIGN KEY (`idcliente`)
    REFERENCES `cliente` (`idcliente`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_agendamento_local1`
    FOREIGN KEY (`idlocal`)
    REFERENCES `local` (`idlocal`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_agendamento_admin1`
    FOREIGN KEY (`idadmin`)
    REFERENCES `admin` (`idadmin`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;

CREATE INDEX `fk_agendamento_funcionario_idx` ON `agendamento` (`idfuncionario` ASC);

CREATE INDEX `fk_agendamento_cliente1_idx` ON `agendamento` (`idcliente` ASC);

CREATE INDEX `fk_agendamento_local1_idx` ON `agendamento` (`idlocal` ASC);

CREATE INDEX `fk_agendamento_admin1_idx` ON `agendamento` (`idadmin` ASC);


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `cliente`
-- -----------------------------------------------------
START TRANSACTION;
USE `ClinicPlus`;
INSERT INTO `cliente` (`idcliente`, `nome`, `cpf`, `nascimento`, `foto`) VALUES (1, 'DENILSON MORILIN', '444.444.444-44', '19721018', NULL);
INSERT INTO `cliente` (`idcliente`, `nome`, `cpf`, `nascimento`, `foto`) VALUES (2, 'CATARINA MORILIN', '555.555.555-55', '19940304', NULL);
INSERT INTO `cliente` (`idcliente`, `nome`, `cpf`, `nascimento`, `foto`) VALUES (3, 'LARRISA FIORETE', '666.666.666-66', '19900713', NULL);
INSERT INTO `cliente` (`idcliente`, `nome`, `cpf`, `nascimento`, `foto`) VALUES (4, 'RICARDO FREZARINA', '777.777.777-77', '19830621', NULL);
INSERT INTO `cliente` (`idcliente`, `nome`, `cpf`, `nascimento`, `foto`) VALUES (5, 'DOUGLAS RAMALHO LAMBRIL', '888.888.888-88', '19851119', NULL);
INSERT INTO `cliente` (`idcliente`, `nome`, `cpf`, `nascimento`, `foto`) VALUES (6, 'AMANDA PRADO', '999.999.999-99', '19990909', NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `funcionario`
-- -----------------------------------------------------
START TRANSACTION;
USE `ClinicPlus`;
INSERT INTO `funcionario` (`idfuncionario`, `nome`, `cpf`, `nascimento`) VALUES (1, 'GABRIEL PINHEIRO', '111.111.111-11', '20000217');
INSERT INTO `funcionario` (`idfuncionario`, `nome`, `cpf`, `nascimento`) VALUES (2, 'LUIS RAMALHO', '222.222.222-22', '19980928');
INSERT INTO `funcionario` (`idfuncionario`, `nome`, `cpf`, `nascimento`) VALUES (3, 'MARIA EDUARDA PRINI', '333.333.333-33', '20030811');

COMMIT;


-- -----------------------------------------------------
-- Data for table `local`
-- -----------------------------------------------------
START TRANSACTION;
USE `ClinicPlus`;
INSERT INTO `local` (`idlocal`, `descricao`) VALUES (1, 'CONSULTORIO 1');
INSERT INTO `local` (`idlocal`, `descricao`) VALUES (2, 'CONSULTORIO 2');
INSERT INTO `local` (`idlocal`, `descricao`) VALUES (3, 'CONSULTORIO 3');
INSERT INTO `local` (`idlocal`, `descricao`) VALUES (4, 'LABORATORIO CLINICO');

COMMIT;


-- -----------------------------------------------------
-- Data for table `admin`
-- -----------------------------------------------------
START TRANSACTION;
USE `ClinicPlus`;
INSERT INTO `admin` (`idadmin`, `nome`, `usuario`, `senha`) VALUES (1, 'AMANDA RUIZ SILVA', 'amanda', '123456');
INSERT INTO `admin` (`idadmin`, `nome`, `usuario`, `senha`) VALUES (2, 'GABRIEL PINHEIRO', 'gabriel', '123456');
INSERT INTO `admin` (`idadmin`, `nome`, `usuario`, `senha`) VALUES (3, 'LUIS RAMALHO', 'luis', '123456');

COMMIT;


-- -----------------------------------------------------
-- Data for table `agendamento`
-- -----------------------------------------------------
START TRANSACTION;
USE `ClinicPlus`;
INSERT INTO `agendamento` (`idagendamento`, `idfuncionario`, `idcliente`, `idlocal`, `idadmin`, `data_agendamento`, `hora_agendamento`, `data_atendimento`, `hora_atendimento`, `data_confirmacao`, `data_cadastro`, `fg_status`) VALUES (1, 1, 1, 1, 1, '20230318', '120000', '20230318', '123000', '20230317114200', '20230304091500', 'F');
INSERT INTO `agendamento` (`idagendamento`, `idfuncionario`, `idcliente`, `idlocal`, `idadmin`, `data_agendamento`, `hora_agendamento`, `data_atendimento`, `hora_atendimento`, `data_confirmacao`, `data_cadastro`, `fg_status`) VALUES (2, 1, 1, 1, 1, '20230330', '140000', NULL, NULL, NULL, '20230310132100', 'A');
INSERT INTO `agendamento` (`idagendamento`, `idfuncionario`, `idcliente`, `idlocal`, `idadmin`, `data_agendamento`, `hora_agendamento`, `data_atendimento`, `hora_atendimento`, `data_confirmacao`, `data_cadastro`, `fg_status`) VALUES (3, 2, 1, 1, 1, '20230321', '153000', NULL, NULL, '20230318190200', '20230315160000', 'C');
INSERT INTO `agendamento` (`idagendamento`, `idfuncionario`, `idcliente`, `idlocal`, `idadmin`, `data_agendamento`, `hora_agendamento`, `data_atendimento`, `hora_atendimento`, `data_confirmacao`, `data_cadastro`, `fg_status`) VALUES (4, 1, 1, 1, 1, '20230319', '170000', NULL, NULL, '20230318090000', '20230315080000', 'I');
INSERT INTO `agendamento` (`idagendamento`, `idfuncionario`, `idcliente`, `idlocal`, `idadmin`, `data_agendamento`, `hora_agendamento`, `data_atendimento`, `hora_atendimento`, `data_confirmacao`, `data_cadastro`, `fg_status`) VALUES (5, 1, 2, 1, 1, '20230330', '100000', NULL, NULL, NULL, '20230321100000', 'A');

COMMIT;

